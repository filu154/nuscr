<!doctype html><html xmlns=http://www.w3.org/1999/xhtml><title>Err (nuscr.Nuscrlib.Err)</title><link rel=stylesheet href=../../../odoc.support/odoc.css><meta charset=utf-8><meta name=generator content="odoc 2.2.1"><meta name=viewport content="width=device-width,initial-scale=1"><script src=../../../odoc.support/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><body class=odoc><nav class=odoc-nav><a href=../index.html>Up</a> â€“ <a href=../../index.html>nuscr</a> &#x00BB; <a href=../index.html>Nuscrlib</a> &#x00BB; Err</nav><header class=odoc-preamble><h1>Module <code><span>Nuscrlib.Err</span></code></h1></header><nav class=odoc-toc><ul><li><a href=#shortcuts-for-raising-exceptions>Shortcuts for raising exceptions</a></ul></nav><div class=odoc-content><p>Error reporting<div class=odoc-spec><div class="spec type anchored" id=type-user_error><a href=#type-user_error class=anchor></a><code><span><span class=keyword>type</span> user_error</span><span> =</span></code><ol><li id=type-user_error.UnknownPragma class="def variant constructor anchored"><a href=#type-user_error.UnknownPragma class=anchor></a><code><span>| </span><span><span class=constructor>UnknownPragma</span> <span class=keyword>of</span> string</span></code><li id=type-user_error.IncompatibleFlag class="def variant constructor anchored"><a href=#type-user_error.IncompatibleFlag class=anchor></a><code><span>| </span><span><span class=constructor>IncompatibleFlag</span> <span class=keyword>of</span> string * string</span></code><li id=type-user_error.MissingFlag class="def variant constructor anchored"><a href=#type-user_error.MissingFlag class=anchor></a><code><span>| </span><span><span class=constructor>MissingFlag</span> <span class=keyword>of</span> string * string</span></code><li id=type-user_error.PragmaNotSet class="def variant constructor anchored"><a href=#type-user_error.PragmaNotSet class=anchor></a><code><span>| </span><span><span class=constructor>PragmaNotSet</span> <span class=keyword>of</span> string * string</span></code><li id=type-user_error.LexerError class="def variant constructor anchored"><a href=#type-user_error.LexerError class=anchor></a><code><span>| </span><span><span class=constructor>LexerError</span> <span class=keyword>of</span> string</span></code><li id=type-user_error.ParserError class="def variant constructor anchored"><a href=#type-user_error.ParserError class=anchor></a><code><span>| </span><span><span class=constructor>ParserError</span> <span class=keyword>of</span> <a href=../Loc/index.html#type-t>Loc.t</a></span></code><li id=type-user_error.UnboundRecursionName class="def variant constructor anchored"><a href=#type-user_error.UnboundRecursionName class=anchor></a><code><span>| </span><span><span class=constructor>UnboundRecursionName</span> <span class=keyword>of</span> <a href=../Names/TypeVariableName/index.html#type-t>Names.TypeVariableName.t</a></span></code><li id=type-user_error.RedefinedRecursionName class="def variant constructor anchored"><a href=#type-user_error.RedefinedRecursionName class=anchor></a><code><span>| </span><span><span class=constructor>RedefinedRecursionName</span> <span class=keyword>of</span> <a href=../Names/TypeVariableName/index.html#type-t>Names.TypeVariableName.t</a> * <a href=../Loc/index.html#type-t>Loc.t</a> * <a href=../Loc/index.html#type-t>Loc.t</a></span></code><li id=type-user_error.Uncategorised class="def variant constructor anchored"><a href=#type-user_error.Uncategorised class=anchor></a><code><span>| </span><span><span class=constructor>Uncategorised</span> <span class=keyword>of</span> string</span></code><li id=type-user_error.InvalidCommandLineParam class="def variant constructor anchored"><a href=#type-user_error.InvalidCommandLineParam class=anchor></a><code><span>| </span><span><span class=constructor>InvalidCommandLineParam</span> <span class=keyword>of</span> string</span></code><li id=type-user_error.UnboundRole class="def variant constructor anchored"><a href=#type-user_error.UnboundRole class=anchor></a><code><span>| </span><span><span class=constructor>UnboundRole</span> <span class=keyword>of</span> <a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a></span></code><li id=type-user_error.ReflexiveMessage class="def variant constructor anchored"><a href=#type-user_error.ReflexiveMessage class=anchor></a><code><span>| </span><span><span class=constructor>ReflexiveMessage</span> <span class=keyword>of</span> <a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a> * <a href=../Loc/index.html#type-t>Loc.t</a> * <a href=../Loc/index.html#type-t>Loc.t</a></span></code><li id=type-user_error.UnableToMerge class="def variant constructor anchored"><a href=#type-user_error.UnableToMerge class=anchor></a><code><span>| </span><span><span class=constructor>UnableToMerge</span> <span class=keyword>of</span> string * <span><a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a> option</span></span></code><li id=type-user_error.RedefinedProtocol class="def variant constructor anchored"><a href=#type-user_error.RedefinedProtocol class=anchor></a><code><span>| </span><span><span class=constructor>RedefinedProtocol</span> <span class=keyword>of</span> <a href=../Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> * <a href=../Loc/index.html#type-t>Loc.t</a> * <a href=../Loc/index.html#type-t>Loc.t</a></span></code><li id=type-user_error.UnboundProtocol class="def variant constructor anchored"><a href=#type-user_error.UnboundProtocol class=anchor></a><code><span>| </span><span><span class=constructor>UnboundProtocol</span> <span class=keyword>of</span> <a href=../Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a></span></code><li id=type-user_error.ArityMismatch class="def variant constructor anchored"><a href=#type-user_error.ArityMismatch class=anchor></a><code><span>| </span><span><span class=constructor>ArityMismatch</span> <span class=keyword>of</span> <a href=../Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> * int * int</span></code><li id=type-user_error.InconsistentNestedChoice class="def variant constructor anchored"><a href=#type-user_error.InconsistentNestedChoice class=anchor></a><code><span>| </span><span><span class=constructor>InconsistentNestedChoice</span> <span class=keyword>of</span> <a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a> * <a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a></span></code><li id=type-user_error.RoleMismatch class="def variant constructor anchored"><a href=#type-user_error.RoleMismatch class=anchor></a><code><span>| </span><span><span class=constructor>RoleMismatch</span> <span class=keyword>of</span> <a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a> * <a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a></span></code><li id=type-user_error.DuplicateLabel class="def variant constructor anchored"><a href=#type-user_error.DuplicateLabel class=anchor></a><code><span>| </span><span><span class=constructor>DuplicateLabel</span> <span class=keyword>of</span> <a href=../Names/LabelName/index.html#type-t>Names.LabelName.t</a></span></code><li id=type-user_error.DuplicateRoleArgs class="def variant constructor anchored"><a href=#type-user_error.DuplicateRoleArgs class=anchor></a><code><span>| </span><span><span class=constructor>DuplicateRoleArgs</span> <span class=keyword>of</span> <a href=../Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a></span></code><li id=type-user_error.DuplicateRoleParams class="def variant constructor anchored"><a href=#type-user_error.DuplicateRoleParams class=anchor></a><code><span>| </span><span><span class=constructor>DuplicateRoleParams</span> <span class=keyword>of</span> <a href=../Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a></span></code><li id=type-user_error.ChoiceCallRoleMismatch class="def variant constructor anchored"><a href=#type-user_error.ChoiceCallRoleMismatch class=anchor></a><code><span>| </span><span><span class=constructor>ChoiceCallRoleMismatch</span> <span class=keyword>of</span> <a href=../Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a></span></code><li id=type-user_error.DuplicatePayloadField class="def variant constructor anchored"><a href=#type-user_error.DuplicatePayloadField class=anchor></a><code><span>| </span><span><span class=constructor>DuplicatePayloadField</span> <span class=keyword>of</span> <a href=../Names/LabelName/index.html#type-t>Names.LabelName.t</a> * <a href=../Names/VariableName/index.html#type-t>Names.VariableName.t</a></span></code><li id=type-user_error.FileSysErr class="def variant constructor anchored"><a href=#type-user_error.FileSysErr class=anchor></a><code><span>| </span><span><span class=constructor>FileSysErr</span> <span class=keyword>of</span> string</span></code><li id=type-user_error.ProtocolNotFound class="def variant constructor anchored"><a href=#type-user_error.ProtocolNotFound class=anchor></a><code><span>| </span><span><span class=constructor>ProtocolNotFound</span> <span class=keyword>of</span> <a href=../Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a></span></code><li id=type-user_error.IllFormedPayloadType class="def variant constructor anchored"><a href=#type-user_error.IllFormedPayloadType class=anchor></a><code><span>| </span><span><span class=constructor>IllFormedPayloadType</span> <span class=keyword>of</span> string</span></code><li id=type-user_error.TypeError class="def variant constructor anchored"><a href=#type-user_error.TypeError class=anchor></a><code><span>| </span><span><span class=constructor>TypeError</span> <span class=keyword>of</span> string * string</span></code><li id=type-user_error.UnknownVariableValue class="def variant constructor anchored"><a href=#type-user_error.UnknownVariableValue class=anchor></a><code><span>| </span><span><span class=constructor>UnknownVariableValue</span> <span class=keyword>of</span> <a href=../Names/RoleName/index.html#type-t>Names.RoleName.t</a> * <a href=../Names/VariableName/index.html#type-t>Names.VariableName.t</a></span></code><li id=type-user_error.UnsatisfiableRefinement class="def variant constructor anchored"><a href=#type-user_error.UnsatisfiableRefinement class=anchor></a><code><span>| </span><span><span class=constructor>UnsatisfiableRefinement</span></span></code><li id=type-user_error.StuckRefinement class="def variant constructor anchored"><a href=#type-user_error.StuckRefinement class=anchor></a><code><span>| </span><span><span class=constructor>StuckRefinement</span></span></code><li id=type-user_error.UnguardedTypeVariable class="def variant constructor anchored"><a href=#type-user_error.UnguardedTypeVariable class=anchor></a><code><span>| </span><span><span class=constructor>UnguardedTypeVariable</span> <span class=keyword>of</span> <a href=../Names/TypeVariableName/index.html#type-t>Names.TypeVariableName.t</a></span></code></ol></div><div class=spec-doc><p>A user error is an error found in the protocols</div></div><div class=odoc-spec><div class="spec value anchored" id=val-sexp_of_user_error><a href=#val-sexp_of_user_error class=anchor></a><code><span><span class=keyword>val</span> sexp_of_user_error : <span><a href=#type-user_error>user_error</a> <span class=arrow>&#45;&gt;</span></span> <span class=xref-unresolved>Sexplib0</span>.Sexp.t</span></code></div></div><div class=odoc-spec><div class="spec exception anchored" id=exception-UserError><a href=#exception-UserError class=anchor></a><code><span><span class=keyword>exception</span> </span><span><span class=exception>UserError</span> <span class=keyword>of</span> <a href=#type-user_error>user_error</a></span></code></div><div class=spec-doc><p>UserError is a user error and should be reported back so it can be fixed</div></div><div class=odoc-spec><div class="spec value anchored" id=val-show_user_error><a href=#val-show_user_error class=anchor></a><code><span><span class=keyword>val</span> show_user_error : <span><a href=#type-user_error>user_error</a> <span class=arrow>&#45;&gt;</span></span> string</span></code></div></div><div class=odoc-spec><div class="spec exception anchored" id=exception-Violation><a href=#exception-Violation class=anchor></a><code><span><span class=keyword>exception</span> </span><span><span class=exception>Violation</span> <span class=keyword>of</span> string * <span class=xref-unresolved>Stdlib</span>.Lexing.position</span></code></div><div class=spec-doc><p>A Violation is reported when an impossible state was reached. It has to be considered a bug even when the fix is to change the Violation to a user error</div></div><div class=odoc-spec><div class="spec exception anchored" id=exception-UnImplemented><a href=#exception-UnImplemented class=anchor></a><code><span><span class=keyword>exception</span> </span><span><span class=exception>UnImplemented</span> <span class=keyword>of</span> string * <span class=xref-unresolved>Stdlib</span>.Lexing.position</span></code></div><div class=spec-doc><p>An Unimplemented is reported when certain features are not implemented, the string attached provides a description of the feature missing.</div></div><h3 id=shortcuts-for-raising-exceptions><a href=#shortcuts-for-raising-exceptions class=anchor></a>Shortcuts for raising exceptions</h3><div class=odoc-spec><div class="spec value anchored" id=val-uerr><a href=#val-uerr class=anchor></a><code><span><span class=keyword>val</span> uerr : <span><a href=#type-user_error>user_error</a> <span class=arrow>&#45;&gt;</span></span> <span class=type-var>'a</span></span></code></div><div class=spec-doc><p>Raise an user error</div></div><div class=odoc-spec><div class="spec value anchored" id=val-unimpl><a href=#val-unimpl class=anchor></a><code><span><span class=keyword>val</span> unimpl : <span>here:<span class=xref-unresolved>Stdlib</span>.Lexing.position <span class=arrow>&#45;&gt;</span></span> <span>string <span class=arrow>&#45;&gt;</span></span> <span class=type-var>'a</span></span></code></div><div class=spec-doc><p>Raise an Unimplemented error</div></div><div class=odoc-spec><div class="spec value anchored" id=val-violation><a href=#val-violation class=anchor></a><code><span><span class=keyword>val</span> violation : <span>here:<span class=xref-unresolved>Stdlib</span>.Lexing.position <span class=arrow>&#45;&gt;</span></span> <span>string <span class=arrow>&#45;&gt;</span></span> <span class=type-var>'a</span></span></code></div><div class=spec-doc><p>Raise a violation, with a reason</div></div><div class=odoc-spec><div class="spec value anchored" id=val-violationf><a href=#val-violationf class=anchor></a><code><span><span class=keyword>val</span> violationf : <span>here:<span class=xref-unresolved>Stdlib</span>.Lexing.position <span class=arrow>&#45;&gt;</span></span> <span><span><span>(<span class=type-var>'a</span>, unit, string, <span class=type-var>'b</span>)</span> <span class=xref-unresolved>Stdlib</span>.format4</span> <span class=arrow>&#45;&gt;</span></span> <span class=type-var>'a</span></span></code></div><div class=spec-doc><p>Raise a violation, with a reason formatted using format strings</div></div></div>
