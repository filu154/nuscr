<!doctype html><html xmlns=http://www.w3.org/1999/xhtml><title>Nuscrlib (nuscr.Nuscrlib)</title><link rel=stylesheet href=../../odoc.support/odoc.css><meta charset=utf-8><meta name=generator content="odoc 2.2.1"><meta name=viewport content="width=device-width,initial-scale=1"><script src=../../odoc.support/highlight.pack.js></script><script>hljs.initHighlightingOnLoad()</script><body class=odoc><nav class=odoc-nav><a href=../index.html>Up</a> â€“ <a href=../index.html>nuscr</a> &#x00BB; Nuscrlib</nav><header class=odoc-preamble><h1>Module <code><span>Nuscrlib</span></code></h1></header><nav class=odoc-toc><ul><li><a href=#parsing>Parsing</a><li><a href=#validation>Validation</a><li><a href=#other-operations>Other operations</a></ul></nav><div class=odoc-content><p>Main entry point of the library<div class=odoc-spec><div class="spec type anchored" id=type-scr_module><a href=#type-scr_module class=anchor></a><code><span><span class=keyword>type</span> scr_module</span></code></div><div class=spec-doc><p>A type for parsed syntax tree</div></div><div class=odoc-spec><div class="spec value anchored" id=val-load_pragmas><a href=#val-load_pragmas class=anchor></a><code><span><span class=keyword>val</span> load_pragmas : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> unit</span></code></div><div class=spec-doc><p>Load pragmas defined in a parsed syntax tree</div></div><h2 id=parsing><a href=#parsing class=anchor></a>Parsing</h2><p>This section deals with parsing protocols.<div class=odoc-spec><div class="spec value anchored" id=val-parse_string><a href=#val-parse_string class=anchor></a><code><span><span class=keyword>val</span> parse_string : <span>string <span class=arrow>&#45;&gt;</span></span> <a href=#type-scr_module>scr_module</a></span></code></div><div class=spec-doc><p>Parse a string into a <a href=#type-scr_module><code>scr_module</code></a>.</div></div><div class=odoc-spec><div class="spec value anchored" id=val-parse><a href=#val-parse class=anchor></a><code><span><span class=keyword>val</span> parse : <span>string <span class=arrow>&#45;&gt;</span></span> <span><span class=xref-unresolved>Stdio</span>.In_channel.t <span class=arrow>&#45;&gt;</span></span> <a href=#type-scr_module>scr_module</a></span></code></div><div class=spec-doc><p>Parse from an input channel. The first parameter is the filename, for use in error messages.</div></div><h2 id=validation><a href=#validation class=anchor></a>Validation</h2><div class=odoc-spec><div class="spec value anchored" id=val-validate_exn><a href=#val-validate_exn class=anchor></a><code><span><span class=keyword>val</span> validate_exn : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> unit</span></code></div><div class=spec-doc><p><code>validate_exn module</code> validates the module <code>module</code> by performing standard checks. If verbose is set to true in the config, debugging messages will be printed</div></div><h2 id=other-operations><a href=#other-operations class=anchor></a>Other operations</h2><div class=odoc-spec><div class="spec value anchored" id=val-protocols_names_of><a href=#val-protocols_names_of class=anchor></a><code><span><span class=keyword>val</span> protocols_names_of : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span><a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> list</span></span></code></div><div class=spec-doc><p><code>protocols_names_of module</code> returns the list of the names of protocols occuring in <code>module</code></div></div><div class=odoc-spec><div class="spec value anchored" id=val-enumerate><a href=#val-enumerate class=anchor></a><code><span><span class=keyword>val</span> enumerate : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span><span>(<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> * <a href=Names/RoleName/index.html#type-t>Names.RoleName.t</a>)</span> list</span></span></code></div><div class=spec-doc><p><code>enumerate module</code> enumerates the roles occurring in <code>module</code>. The output is a list of pair <code>(protocol, role-name)</code>.</div></div><div class=odoc-spec><div class="spec value anchored" id=val-project_role><a href=#val-project_role class=anchor></a><code><span><span class=keyword>val</span> project_role : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <span>role:<a href=Names/RoleName/index.html#type-t>Names.RoleName.t</a> <span class=arrow>&#45;&gt;</span></span> <a href=Ltype/index.html#type-t>Ltype.t</a></span></code></div><div class=spec-doc><p><code>project_role module protocol role</code> computes the local type for role <code>role</code> in the protocol <code>protocol</code>.</div></div><div class=odoc-spec><div class="spec value anchored" id=val-get_global_type><a href=#val-get_global_type class=anchor></a><code><span><span class=keyword>val</span> get_global_type : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <a href=Gtype/index.html#type-t>Gtype.t</a></span></code></div><div class=spec-doc><p><code>get_global_type module ~protocol</code> gets the corresponding global type for a protocol in a module</div></div><div class=odoc-spec><div class="spec value anchored" id=val-get_global_type_literature_syntax><a href=#val-get_global_type_literature_syntax class=anchor></a><code><span><span class=keyword>val</span> get_global_type_literature_syntax : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <a href=LiteratureSyntax/index.html#type-global>LiteratureSyntax.global</a></span></code></div><div class=spec-doc><p><code>get_global_type_literature_syntax module ~protocol</code> gets the corresponding global type for a protocol in a module in literature syntax</div></div><div class=odoc-spec><div class="spec value anchored" id=val-get_global_type_protobuf><a href=#val-get_global_type_protobuf class=anchor></a><code><span><span class=keyword>val</span> get_global_type_protobuf : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> string</span></code></div><div class=spec-doc><p><code>get_global_type_protobuf module ~protocol</code> gets the corresponding global type for a protocol in a module in protobuf format</div></div><div class=odoc-spec><div class="spec value anchored" id=val-generate_fsm><a href=#val-generate_fsm class=anchor></a><code><span><span class=keyword>val</span> generate_fsm : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <span>role:<a href=Names/RoleName/index.html#type-t>Names.RoleName.t</a> <span class=arrow>&#45;&gt;</span></span> <a href=Efsm/index.html#type-state>Efsm.state</a> * <a href=Efsm/index.html#type-t>Efsm.t</a></span></code></div><div class=spec-doc><p><code>generate_fsm module protocol role</code> computes the finite state machine of role <code>role</code> in protocol <code>protocol</code>, in module <code>module</code>. It returns a pair <code>(v, g)</code> where <code>g</code> is the graph describing the fsm, and <code>v</code> is the root index.</div></div><div class=odoc-spec><div class="spec value anchored" id=val-generate_go_code><a href=#val-generate_go_code class=anchor></a><code><span><span class=keyword>val</span> generate_go_code : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <span>out_dir:string <span class=arrow>&#45;&gt;</span></span> <span>go_path:<span>string option</span> <span class=arrow>&#45;&gt;</span></span> string</span></code></div><div class=spec-doc><p><code>generate_code module protocol out_dir go_path</code> generates Golang implementation for <code>protocol</code>. The protocol implementation designed to be a subpackage within a project. <code>out_dir</code> is the path from the root of the project until the package inside which the protocol implementation (subpackage) should be generated - it is needed to generate imports. <code>go_path</code> is the path to the project root, which can optionally be provided in order to write the implementation to the file system.</div></div><div class=odoc-spec><div class="spec value anchored" id=val-generate_ocaml_code><a href=#val-generate_ocaml_code class=anchor></a><code><span><span class=keyword>val</span> generate_ocaml_code : <span>monad:bool <span class=arrow>&#45;&gt;</span></span> <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <span>role:<a href=Names/RoleName/index.html#type-t>Names.RoleName.t</a> <span class=arrow>&#45;&gt;</span></span> string</span></code></div><div class=spec-doc><p><code>generate_code ~monad module protocol role</code> generates event-style OCaml code for the <code>role</code> in <code>protocol</code>, inside a <code>module</code> <code>monad</code> indicates whether the generated code uses a monad for transport (e.g. Lwt, Async)</div></div><div class=odoc-spec><div class="spec value anchored" id=val-generate_sexp><a href=#val-generate_sexp class=anchor></a><code><span><span class=keyword>val</span> generate_sexp : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> string</span></code></div><div class=spec-doc><p><code>generate_code ~monad module protocol role</code> generates event-style OCaml code for the <code>role</code> in <code>protocol</code>, inside a <code>module</code> <code>monad</code> indicates whether the generated code uses a monad for transport (e.g. Lwt, Async)</div></div><div class=odoc-spec><div class="spec value anchored" id=val-generate_ast><a href=#val-generate_ast class=anchor></a><code><span><span class=keyword>val</span> generate_ast : <span>monad:bool <span class=arrow>&#45;&gt;</span></span> <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <span>role:<a href=Names/RoleName/index.html#type-t>Names.RoleName.t</a> <span class=arrow>&#45;&gt;</span></span> <span class=xref-unresolved>Ppxlib_ast</span>.Parsetree.structure</span></code></div><div class=spec-doc><p><code>generate_ast ~monad module protocol role</code> is similar to <code>generate_code</code>, except it returns an AST instead of a string</div></div><div class=odoc-spec><div class="spec value anchored" id=val-generate_fstar_code><a href=#val-generate_fstar_code class=anchor></a><code><span><span class=keyword>val</span> generate_fstar_code : <span><a href=#type-scr_module>scr_module</a> <span class=arrow>&#45;&gt;</span></span> <span>protocol:<a href=Names/ProtocolName/index.html#type-t>Names.ProtocolName.t</a> <span class=arrow>&#45;&gt;</span></span> <span>role:<a href=Names/RoleName/index.html#type-t>Names.RoleName.t</a> <span class=arrow>&#45;&gt;</span></span> string</span></code></div><div class=spec-doc><p>Generate F* code, with support for refinement types</div></div><div class=odoc-spec><div class="spec module anchored" id=module-Pragma><a href=#module-Pragma class=anchor></a><code><span><span class=keyword>module</span> <a href=Pragma/index.html>Pragma</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div><div class=spec-doc><p>This module contains variables configuarations, to be set by pragmas or command line arguments, not to be changed for the duration of the program</div></div><div class=odoc-spec><div class="spec module anchored" id=module-Expr><a href=#module-Expr class=anchor></a><code><span><span class=keyword>module</span> <a href=Expr/index.html>Expr</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div><div class=spec-doc><p>Expressions, used in <code>RefinementTypes</code> pragma</div></div><div class=odoc-spec><div class="spec module anchored" id=module-Gtype><a href=#module-Gtype class=anchor></a><code><span><span class=keyword>module</span> <a href=Gtype/index.html>Gtype</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div><div class=spec-doc><p>Global types</div></div><div class=odoc-spec><div class="spec module anchored" id=module-Ltype><a href=#module-Ltype class=anchor></a><code><span><span class=keyword>module</span> <a href=Ltype/index.html>Ltype</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div><div class=spec-doc><p>Local type management</div></div><div class=odoc-spec><div class="spec module anchored" id=module-Efsm><a href=#module-Efsm class=anchor></a><code><span><span class=keyword>module</span> <a href=Efsm/index.html>Efsm</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div></div><div class=odoc-spec><div class="spec module anchored" id=module-Err><a href=#module-Err class=anchor></a><code><span><span class=keyword>module</span> <a href=Err/index.html>Err</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div></div><div class=odoc-spec><div class="spec module anchored" id=module-Names><a href=#module-Names class=anchor></a><code><span><span class=keyword>module</span> <a href=Names/index.html>Names</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div><div class=spec-doc><p>Identifiers and Namespaces</div></div><div class=odoc-spec><div class="spec module anchored" id=module-Loc><a href=#module-Loc class=anchor></a><code><span><span class=keyword>module</span> <a href=Loc/index.html>Loc</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div></div><div class=odoc-spec><div class="spec module anchored" id=module-LiteratureSyntax><a href=#module-LiteratureSyntax class=anchor></a><code><span><span class=keyword>module</span> <a href=LiteratureSyntax/index.html>LiteratureSyntax</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div><div class=spec-doc><p>A Multiparty Session Type representation that is similar to those used in the literature</div></div><div class=odoc-spec><div class="spec module anchored" id=module-ProtobufConvert><a href=#module-ProtobufConvert class=anchor></a><code><span><span class=keyword>module</span> <a href=ProtobufConvert/index.html>ProtobufConvert</a></span><span> : <span class=keyword>sig</span> ... <span class=keyword>end</span></span></code></div></div></div>
